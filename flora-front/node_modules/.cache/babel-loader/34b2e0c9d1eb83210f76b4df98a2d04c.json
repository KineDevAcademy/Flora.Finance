{"ast":null,"code":"var _jsxFileName = \"/home/arieiro/rust/Flora.Network/flora-front/src/components/AccountSelector.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { useWeb3React } from '@web3-react/core';\nimport { injected } from '../wallet/connector';\nimport { useSubstrate } from '../substrate-lib';\nimport { Menu, Button, Dropdown, Container, Icon, Image, Label } from 'semantic-ui-react';\nimport flora from \"../images/flora.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Main(props) {\n  _s();\n\n  const {\n    keyring\n  } = useSubstrate();\n  const {\n    setAccountAddress\n  } = props;\n  const [accountSelected, setAccountSelected] = useState('');\n  const {\n    active,\n    account,\n    library,\n    connector,\n    activate,\n    deactivate\n  } = useWeb3React(); // Get the list of accounts we possess the private key for\n\n  const keyringOptions = keyring.getPairs().map(account => ({\n    key: account.address,\n    value: account.address,\n    text: account.meta.name.toUpperCase(),\n    icon: 'user'\n  }));\n  const initialAddress = keyringOptions.length > 0 ? keyringOptions[0] = '' : ''; // Set the initial address\n\n  useEffect(() => {\n    setAccountAddress(initialAddress);\n    setAccountSelected(initialAddress);\n  }, [setAccountAddress, initialAddress]);\n\n  const onChange = address => {\n    // Update state with new account address\n    setAccountAddress(address);\n    setAccountSelected(address);\n  };\n\n  async function connect() {\n    try {\n      await activate(injected);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Menu, {\n    attached: \"top\",\n    tabular: true,\n    style: {\n      backgroundColor: '#fff',\n      borderColor: '#fff',\n      paddingTop: '1em',\n      paddingBottom: '1em'\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Menu.Menu, {\n        children: /*#__PURE__*/_jsxDEV(Image, {\n          src: flora,\n          size: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Menu, {\n        position: \"right\",\n        style: {\n          alignItems: 'center'\n        },\n        children: [!accountSelected ? /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Add your account with the\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            href: \"https://github.com/polkadot-js/extension\",\n            children: \"Polkadot JS Extension\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this) : null, /*#__PURE__*/_jsxDEV(CopyToClipboard, {\n          text: accountSelected,\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            basic: true,\n            circular: true,\n            size: \"large\",\n            icon: \"user\",\n            color: accountSelected ? 'green' : 'red'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: connect,\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Not Connected\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n          search: true,\n          selection: true,\n          clearable: true,\n          placeholder: \"Select an account\",\n          options: keyringOptions,\n          onChange: (_, dropdown) => {\n            onChange(dropdown.value);\n            console.log();\n          },\n          value: accountSelected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BalanceAnnotation, {\n          accountSelected: accountSelected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Main, \"1IeUUrB0JaYwCcoSOk1BPcaOw3E=\", false, function () {\n  return [useSubstrate, useWeb3React];\n});\n\n_c = Main;\n\nfunction BalanceAnnotation(props) {\n  _s2();\n\n  const {\n    accountSelected\n  } = props;\n  const {\n    api\n  } = useSubstrate();\n  const [accountBalance, setAccountBalance] = useState(0); // When account address changes, update subscriptions\n\n  useEffect(() => {\n    let unsubscribe; // If the user has selected an address, create a new subscription\n\n    accountSelected && api.query.system.account(accountSelected, balance => {\n      setAccountBalance(balance.data.free.toHuman());\n    }).then(unsub => {\n      unsubscribe = unsub;\n    }).catch(console.error);\n    return () => unsubscribe && unsubscribe();\n  }, [api, accountSelected]);\n  return accountSelected ? /*#__PURE__*/_jsxDEV(Label, {\n    pointing: \"left\",\n    children: [/*#__PURE__*/_jsxDEV(Icon, {\n      name: \"money\",\n      color: \"green\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this), accountBalance]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 7\n  }, this) : null;\n}\n\n_s2(BalanceAnnotation, \"K8CE07JZT01VekjzFmDKDxLQvg0=\", false, function () {\n  return [useSubstrate];\n});\n\n_c2 = BalanceAnnotation;\nexport default function AccountSelector(props) {\n  _s3();\n\n  const {\n    api,\n    keyring\n  } = useSubstrate();\n  return keyring.getPairs && api.query ? /*#__PURE__*/_jsxDEV(Main, { ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 42\n  }, this) : null;\n}\n\n_s3(AccountSelector, \"HDzSjrVOVzdkdXtHPW4qm3XuKeI=\", false, function () {\n  return [useSubstrate];\n});\n\n_c3 = AccountSelector;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Main\");\n$RefreshReg$(_c2, \"BalanceAnnotation\");\n$RefreshReg$(_c3, \"AccountSelector\");","map":{"version":3,"sources":["/home/arieiro/rust/Flora.Network/flora-front/src/components/AccountSelector.js"],"names":["React","useState","useEffect","CopyToClipboard","useWeb3React","injected","useSubstrate","Menu","Button","Dropdown","Container","Icon","Image","Label","Main","props","keyring","setAccountAddress","accountSelected","setAccountSelected","active","account","library","connector","activate","deactivate","keyringOptions","getPairs","map","key","address","value","text","meta","name","toUpperCase","icon","initialAddress","length","onChange","connect","e","console","log","backgroundColor","borderColor","paddingTop","paddingBottom","flora","alignItems","_","dropdown","BalanceAnnotation","api","accountBalance","setAccountBalance","unsubscribe","query","system","balance","data","free","toHuman","then","unsub","catch","error","AccountSelector"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { useWeb3React } from '@web3-react/core';\nimport { injected } from '../wallet/connector';\nimport { useSubstrate } from '../substrate-lib';\nimport {\n  Menu,\n  Button,\n  Dropdown,\n  Container,\n  Icon,\n  Image,\n  Label\n} from 'semantic-ui-react';\nimport flora from '../images/flora.svg';\n\nfunction Main (props) {\n  const { keyring } = useSubstrate();\n  const { setAccountAddress } = props;\n  const [accountSelected, setAccountSelected] = useState('');\n  const { active, account, library, connector, activate, deactivate } =  useWeb3React();\n\n  // Get the list of accounts we possess the private key for\n  const keyringOptions = keyring.getPairs().map(account => ({\n    key: account.address,\n    value: account.address,\n    text: account.meta.name.toUpperCase(),\n    icon: 'user'\n  }));\n\n  const initialAddress =\n    keyringOptions.length > 0 ? keyringOptions[0] = '' : '';\n\n  // Set the initial address\n  useEffect(() => {\n    setAccountAddress(initialAddress);\n    setAccountSelected(initialAddress);\n  }, [setAccountAddress, initialAddress]);\n\n  const onChange = address => {\n    // Update state with new account address\n    setAccountAddress(address);\n    setAccountSelected(address);\n  };\n\n  async function connect() {\n    try {\n      await activate(injected)\n    } catch(e) {\n      console.log(e)\n    }\n  }\n\n  return (\n    <Menu\n      attached='top'\n      tabular\n      style={{\n        backgroundColor: '#fff',\n        borderColor: '#fff',\n        paddingTop: '1em',\n        paddingBottom: '1em'\n      }}\n    >\n    <Container>\n      <Menu.Menu>\n        <Image src={flora} size='medium' />\n      </Menu.Menu>\n      <Menu.Menu position='right' style={{ alignItems: 'center' }}>\n        { !accountSelected\n          ? <span>\n            Add your account with the{' '}\n              <a\n                target='_blank'\n                rel='noopener noreferrer'\n                href='https://github.com/polkadot-js/extension'\n              >\n                Polkadot JS Extension\n              </a>\n            </span>\n            : null }\n          <CopyToClipboard text={accountSelected}>\n            <Button\n              basic\n              circular\n              size='large'\n              icon='user'\n              color={accountSelected ? 'green' : 'red'}\n            />\n            <div onClick={connect}>\n              <button><span>Not Connected</span></button>\n            </div>\n          </CopyToClipboard>\n          <Dropdown\n            search\n            selection\n            clearable\n            placeholder='Select an account'\n            options={keyringOptions}\n            onChange={(_, dropdown) => {\n              onChange(dropdown.value);\n              console.log()\n            }}\n            value={accountSelected}\n          />\n          \n          <BalanceAnnotation accountSelected={accountSelected} />\n        </Menu.Menu>\n      </Container>\n    </Menu>\n  );\n}\n\nfunction BalanceAnnotation (props) {\n  const { accountSelected } = props;\n  const { api } = useSubstrate();\n  const [accountBalance, setAccountBalance] = useState(0);\n\n  // When account address changes, update subscriptions\n  useEffect(() => {\n    let unsubscribe;\n\n    // If the user has selected an address, create a new subscription\n    accountSelected &&\n      api.query.system.account(accountSelected, balance => {\n        setAccountBalance(balance.data.free.toHuman());\n      })\n        .then(unsub => {\n          unsubscribe = unsub;\n        })\n        .catch(console.error);\n\n    return () => unsubscribe && unsubscribe();\n  }, [api, accountSelected]);\n\n  return accountSelected\n    ? <Label pointing='left'>\n        <Icon name='money' color='green' />\n        {accountBalance}\n      </Label>\n    : null;\n}\n\nexport default function AccountSelector (props) {\n  const { api, keyring } = useSubstrate();\n  return keyring.getPairs && api.query ? <Main {...props} /> : null;\n}\n"]},"metadata":{},"sourceType":"module"}